
<title>Sign Up</title>
<link rel="stylesheet" type="text/css" href="./css/signup.css">
	

<div class="container">
	<div class="d-flex justify-content-center h-100">
		<div class="card">

			<div class="card-header">
				<h3>Sign Up</h3>
				<div class="d-flex justify-content-end social_icon">
					<span><i class="fab fa-google-plus-square"></i></span>
				</div>
			</div>
			
			<div class="card-body">
				<form class="form-signup" id="form-signup" action="/signup" method="POST">

					<div class="column">
						<div class="row">
							<div class="col-lg-6">
								<div class="input-group form-group pt-3 pb-2">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="fas fa-user"></i></span>
									</div>
									<input type="text" class="form-control" placeholder="username" required name="username">
								</div>
								<div class="input-error username-error"></div>
							</div>
							<div class="col-lg-6">
								<div class="input-group form-group pt-3 pb-2">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="fas fa-user"></i></span>
									</div>
									<input type="text" class="form-control" placeholder="full name" required name="fullname">
								</div>
								<div class="input-error fullname-error"></div>
							</div>
						</div>

						<div class="row">
							<div class="col-lg-6">
								<div class="input-group form-group py-2">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="fas fa-key"></i></span>
									</div>
									<input type="password" class="form-control" placeholder="password" required name="password">
								</div>
								<div class="input-error password-error"></div>
							</div>
							<div class="col-lg-6">
								<div class="input-group form-group py-2">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="fas fa-envelope"></i></span>
									</div>
									<input type="text" class="form-control" placeholder="your email" required name="mail">
								</div>
								<div class="input-error mail-error"></div>
							</div>
						</div>

						<div class="row">
							<div class="col-lg-6">
								<div class="input-group form-group py-2">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="fas fa-key"></i></span>
									</div>
									<input type="password" class="form-control" placeholder="repeat password" required name="confirmPassword">
								</div>
								<div class="input-error confirmPassword-error"></div>
							</div>
							<div class="col-lg-6">
								<div class="input-group form-group py-2">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="fas fa-phone"></i></span>
									</div>
									<input type="text" class="form-control" placeholder="your phone" required name="phone">
								</div>
								<div class="input-error phone-error"></div>
							</div>
						</div>
					</div>



					{{!-- <div class="row">
						<div class="col-lg-6">
							<div class="input-group form-group pt-3 pb-2">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fas fa-user"></i></span>
								</div>
								<input type="text" class="form-control" placeholder="username" required name="tenDangNhap">
							</div>
		
							<div class="input-group form-group py-2">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fas fa-key"></i></span>
								</div>
								<input type="password" class="form-control" placeholder="password" required name="matKhau">
							</div>
		
							<div class="input-group form-group py-2">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fas fa-key"></i></span>
								</div>
								<input type="password" class="form-control" placeholder="repeat password" required name="xacNhanMatKhau">
							</div>
						</div>
					
	
						<div class="col-lg-6">
							<div class="input-group form-group pt-3 pb-2">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fas fa-user"></i></span>
								</div>
								<input type="text" class="form-control" placeholder="full name" required name="hoTen">
							</div>

							<div class="input-group form-group py-2">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fas fa-envelope"></i></span>
								</div>
								<input type="text" class="form-control" placeholder="your email" required name="mail">
							</div>
		
							<div class="input-group form-group py-2">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fas fa-phone"></i></span>
								</div>
								<input type="text" class="form-control" placeholder="your phone" required name="soDienThoai">
							</div>
						</div>
					</div> --}}

					<div class="form-group d-flex justify-content-end pt-4">
						<input type="submit" id= "signup_btn" value="Submit" class="btn float-right submit_btn">
					</div>

				</form>
			</div>



			<div class="card-footer text-center">
				<div>
                    <p>Have already an account? 
                        <a href="./login" class="text-decoration-none"><small>Login here</small></a>
                    </p>
                </div>
			</div>

			<script>
				const signupForm = document.getElementById('form-signup');
				const usernameError = document.querySelector('.username-error');
				const passwordError = document.querySelector('.password-error');
				const confirmPasswordError = document.querySelector('.confirmPassword-error');
				const fullnameError = document.querySelector('.fullname-error');
				const mailError = document.querySelector('.mail-error');
				const phoneError = document.querySelector('.phone-error');

				signupForm.addEventListener('submit', async (e) => {
					e.preventDefault();
					usernameError.textContent = '';
					passwordError.textContent = '';
					confirmPasswordError.textContent = '';
					fullnameError.textContent = '';
					mailError.textContent = '';
					phoneError.textContent = '';

					const username = signupForm.username.value;
					const password = signupForm.password.value;
					const confirmPassword = signupForm.confirmPassword.value;
					const fullname = signupForm.fullname.value;
					const mail = signupForm.mail.value;
					const phone = signupForm.phone.value;

					try {
						const res = await fetch('/signup', {
							method: 'POST',
							body: JSON.stringify({ username, password, confirmPassword, fullname, phone, mail }),
							headers: {'Content-Type': 'application/json'}
						});
						const data = await res.json();
						console.log(data);
						if (data.errors) {
							usernameError.textContent = data.errors.username;
							passwordError.textContent = data.errors.password;
							confirmPasswordError.textContent = data.errors.confirmPassword;
							fullnameError.textContent = data.errors.fullname;
							mailError.textContent = data.errors.mail;
							phoneError.textContent = data.errors.phone;
						}
						if (data.user) {
							location.assign('/');
						}
					}
					catch (err) {
						console.log('sign up error');
						console.log(err);
					}

				});
				
				
			</script>
		</div>
	</div>
</div>